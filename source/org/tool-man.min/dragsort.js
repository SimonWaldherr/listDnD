ToolMan._dragsortFactory={makeSortable:function(a){var b=ToolMan.drag().createSimpleGroup(a);b.register("dragstart",this._onDragStart);b.register("dragmove",this._onDragMove);b.register("dragend",this._onDragEnd);return b},makeListSortable:function(d){var c=ToolMan.helpers();var e=ToolMan.coordinates();var a=d.getElementsByTagName("li");c.map(a,function(i){var j=dragsort.makeSortable(i);j.setThreshold(4);var h,g;j.addTransform(function(l,k){return l.constrainTo(h,g)});j.register("dragstart",function(){var k=d.getElementsByTagName("li");h=g=e.topLeftOffset(k[0]);for(var l=1,o=k.length;l<o;l++){var m=e.topLeftOffset(k[l]);h=h.min(m);g=g.max(m)}})});for(var b=1,f=arguments.length;b<f;b++){c.map(a,arguments[b])}},_onDragStart:function(a){},_onDragMove:function(f){var a=ToolMan.helpers();var g=ToolMan.coordinates();var j=f.group.element;var b=f.transformedMouseOffset;var i=null;var d=a.previousItem(j,j.nodeName);while(d!=null){var e=g.bottomRightOffset(d);if(b.y<=e.y&&b.x<=e.x){i=d}d=a.previousItem(d,j.nodeName)}if(i!=null){a.moveBefore(j,i);return}var c=a.nextItem(j,j.nodeName);while(c!=null){var h=g.topLeftOffset(c);if(h.y<=b.y&&h.x<=b.x){i=c}c=a.nextItem(c,j.nodeName)}if(i!=null){a.moveBefore(j,a.nextItem(i,j.nodeName));return}},_onDragEnd:function(a){ToolMan.coordinates().create(0,0).reposition(a.group.element)}};